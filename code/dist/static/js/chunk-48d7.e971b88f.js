(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-48d7"],{"30Qo":function(e,t,n){"use strict";var a=n("5DVq");n.n(a).a},"5DVq":function(e,t,n){var a=n("mp0y");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("5e669ca7",a,!0,{})},DPpy:function(e,t,n){"use strict";var a=n("Ocb2");n.n(a).a},JeOK:function(e,t,n){"use strict";n.r(t);var a=n("QbLZ"),o=n.n(a),r=n("L2JU"),i=n("GQeE"),s=n.n(i),l=n("xQeI"),d=n("4ZnT"),c={components:{PublicPopups:l.a},props:{roleData:{type:Object,default:function(){return{}}},eventType:{type:String,default:""}},data:function(){return{addRolesForm:{name:"",describe:""},rolesFormRules:{name:[{required:!0,trigger:"blur",validator:function(e,t,n){0===t.length&&n(new Error("角色名称不能为空")),n()}}]},titleTextObj:{add:"新增角色",edit:"编辑角色"},titleText:"新增角色",isLoading:!1,isSubmit:!1}},watch:{roleData:function(e){var t=s()(e);"edit"===this.eventType&&t.length>0&&(this.addRolesForm=e)},eventType:function(e){this.titleText=this.titleTextObj[e]}},methods:{submitForm:function(){var e=this;this.$refs.addRolesForm.validate(function(t){if(t){var n=void 0;e.isLoading=!0,"add"===e.eventType?n=Object(d.a)(e.addRolesForm):"edit"===e.eventType&&(n=Object(d.c)(e.addRolesForm)),n.then(function(t){e.isLoading=!1,e.isSubmit=!0,e.$message({showClose:!0,message:e.titleText+"成功",type:"success",duration:3e3}),e.submittedHandle()}).catch(function(t){e.isLoading=!1})}})},submittedHandle:function(){this.$emit("submitComplete",this.isSubmit),this.$refs.addRolesForm.resetFields(),this.isSubmit=!1}}},p=(n("DPpy"),n("KHd+")),m=Object(p.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("publicPopups",e._g({attrs:{"title-text":e.titleText,width:"600px"},on:{formConfirm:e.submitForm,closePopupsBox:e.submittedHandle}},e.$listeners),[n("template",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],slot:"main-content"},[n("el-form",{ref:"addRolesForm",staticClass:"add-roles-from",attrs:{model:e.addRolesForm,rules:e.rolesFormRules}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.addRolesForm.name,callback:function(t){e.$set(e.addRolesForm,"name",t)},expression:"addRolesForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色描述",prop:"describe"}},[n("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入角色描述"},model:{value:e.addRolesForm.describe,callback:function(t){e.$set(e.addRolesForm,"describe",t)},expression:"addRolesForm.describe"}})],1)],1)],1)],2)},[],!1,null,"b65f2434",null);m.options.__file="addRoles.vue";var b={components:{AddRoles:m.exports},data:function(){return{rolesTreeData:[],rolesTreeProps:{label:"name",children:"children"},memberTableData:[],searchFormData:{name:"",phone:""},isAddRolesShow:!1,roleTreeLoading:!1,iStableLoading:!1,editRoleData:{},addOrEditRole:"",pageTotal:0}},created:function(){this.getRolesList()},methods:o()({},Object(r.b)(["getPerRoles"]),Object(r.d)({clearRoles:"CLEAR_PER_ROLES"}),{addRolesBoxCtrl:function(){this.isAddRolesShow=!this.isAddRolesShow},pageChangeHandle:function(e){},getRolesPersonFun:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.iStableLoading=!0;var a=n.name,o=n.phone,r=n.pageIndex,i={name:a||"",phone:o||"",pageIndex:r||0,pageSize:10};Object(d.e)(e.id,i).then(function(e){t.memberTableData=e.result,e.pageTotal?t.pageTotal=e.pageTotal:t.pageTotal=e.result.length,t.iStableLoading=!1}).catch(function(){t.iStableLoading=!1})},searchHandle:function(){var e={name:this.searchFormData.name,phone:this.searchFormData.phone},t=this.$refs.rolesTree.getCurrentNode();this.getRolesPersonFun(t,e)},nodeClickHandle:function(e,t){this.$nextTick(function(){this.$refs.rolesTree.setCurrentKey(e.id)}),this.getRolesPersonFun(e)},deleteRole:function(e){var t=this;this.$confirm("确定删除该角色？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"wraning"}).then(function(n){t.roleTreeLoading=!0,Object(d.b)(e.id).then(function(e){t.$message({showClose:!0,message:"删除成功",type:"success",duration:3e3}),t.clearRoles(),t.getRolesList()}).catch(function(){t.roleTreeLoading=!1})})},getRolesList:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.roleTreeLoading=!0,this.getPerRoles().then(function(t){e.roleTreeLoading=!1,e.rolesTreeData=t}).catch(function(){e.roleTreeLoading=!1})},dropdownHandle:function(e,t){if(e)switch(e){case"add":this.addOrEditRole=e,this.addRolesBoxCtrl();break;case"edit":this.editRoleData=t,this.addOrEditRole=e,this.addRolesBoxCtrl();break;case"delete":this.deleteRole(t)}},submitComplete:function(e){this.addRolesBoxCtrl(),e&&(this.clearRoles(),this.getRolesList())},addTreeContRender:function(e,t){var n=this,a=t.node,o=t.data,r=(t.store,o);return e("span",{class:"custom-tree-node"},[e("span",[a.label]),e("span",[e("el-dropdown",{on:{command:function(e){return n.dropdownHandle(e,r)}}},[e("el-button",{attrs:{type:"primary",circle:!0,size:"mini"},class:"el-icon-edit tree-edit-btn"}),e("el-dropdown-menu",{slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"edit"}},["编辑"]),e("el-dropdown-item",{attrs:{command:"delete"}},["删除"])])])])])}})},u=(n("OSnV"),Object(p.a)(b,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTreeLoading,expression:"roleTreeLoading"}],staticClass:"roles-tree-wrap",attrs:{width:"250px"}},[n("div",{staticClass:"header"},[n("span",[e._v("角色列表")]),e._v(" "),n("el-button",{staticClass:"el-icon-plus add-roles-btn",attrs:{type:"primary",circle:"",size:"small"},on:{click:e.addRolesBoxCtrl}})],1),e._v(" "),n("el-tree",{ref:"rolesTree",staticClass:"roles-tree",attrs:{data:e.rolesTreeData,props:e.rolesTreeProps,"expand-on-click-node":!1,"render-content":e.addTreeContRender,"node-key":"id","highlight-current":""},on:{"node-click":e.nodeClickHandle}})],1),e._v(" "),n("el-main",{staticClass:"roles-detail-wrap"},[n("div",{staticClass:"roles-members"},[n("div",{staticClass:"header"},[n("span",[e._v("人员列表 ")])]),e._v(" "),n("div",{staticClass:"search-wrap"},[n("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchFormData}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入姓名"},model:{value:e.searchFormData.name,callback:function(t){e.$set(e.searchFormData,"name",t)},expression:"searchFormData.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchFormData.phone,callback:function(t){e.$set(e.searchFormData,"phone",t)},expression:"searchFormData.phone"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.searchHandle}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"table-wrap"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.iStableLoading,expression:"iStableLoading"}],ref:"memberTable",staticClass:"member-table",attrs:{data:e.memberTableData,size:"small"}},[n("el-table-column",{attrs:{prop:"name",width:"100",label:"姓名",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",[e._v("删除")])]}}])})],1)],1),e._v(" "),n("el-pagination",{attrs:{total:e.pageTotal,"page-size":10,background:"",layout:"prev, pager, next, jumper"},on:{"current-change":e.pageChangeHandle}})],1)]),e._v(" "),n("AddRoles",{directives:[{name:"show",rawName:"v-show",value:e.isAddRolesShow,expression:"isAddRolesShow"}],attrs:{"role-data":e.editRoleData,"event-type":e.addOrEditRole},on:{submitComplete:e.submitComplete}})],1)},[],!1,null,"d09fb9de",null));u.options.__file="permission.vue";t.default=u.exports},OSnV:function(e,t,n){"use strict";var a=n("urSy");n.n(a).a},Ocb2:function(e,t,n){var a=n("y0k3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("6ec0eac4",a,!0,{})},mp0y:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".container-shadow[data-v-001e034e] {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.container-shadow .container[data-v-001e034e] {\n    border-radius: 10px;\n    -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n    background: #fff;\n    overflow: hidden;\n}\n.container-shadow .container .header[data-v-001e034e] {\n      padding: 10px 5px 10px 20px;\n      background: #e6e6e6;\n      height: 50px;\n      line-height: 32px;\n      font-size: 18px;\n}\n.container-shadow .container .header i[data-v-001e034e] {\n        cursor: pointer;\n        float: right;\n        color: #f00;\n        font-size: 30px;\n}\n.container-shadow .container .main[data-v-001e034e] {\n      padding: 1px 20px;\n      max-height: calc(100vh - 140px);\n      overflow: auto;\n}\n.container-shadow .container .main.border-bottom[data-v-001e034e] {\n        border-bottom: 1px solid #ccc;\n}\n.container-shadow .container .footer[data-v-001e034e] {\n      min-height: 70px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n}\n.container-shadow .container .footer .el-button[data-v-001e034e] {\n        margin: 0 20px;\n}\n",""])},urSy:function(e,t,n){var a=n("w9ET");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("ff241a1a",a,!0,{})},w9ET:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".el-container .header[data-v-d09fb9de] {\n  height: 40px;\n  background: #e6e6e6;\n  line-height: 40px;\n  padding: 0 10px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.el-container .el-button[data-v-d09fb9de] {\n  padding: 7px 7px;\n}\n.el-container .add-roles-btn[data-v-d09fb9de] {\n  font-size: 14px;\n  padding: 5px;\n}\n.el-container .roles-tree-wrap[data-v-d09fb9de] {\n  margin: 20px;\n  min-height: 300px;\n  padding: 0px;\n  border: 1px solid #e6e6e6;\n  border-top: none;\n  border-radius: 5px;\n  overflow-y: hidden;\n  -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n.el-container .roles-tree-wrap .roles-tree[data-v-d09fb9de] {\n    padding: 10px;\n}\n.el-container .roles-tree-wrap .roles-tree .el-tree-node__content[data-v-d09fb9de] {\n      margin: 5px 0;\n}\n.el-container .roles-detail-wrap[data-v-d09fb9de] {\n  padding-left: 0;\n}\n.el-container .roles-detail-wrap .roles-members[data-v-d09fb9de] {\n    padding: 0px;\n    border: 1px solid #e6e6e6;\n    border-top: none;\n    border-radius: 5px;\n    overflow-y: hidden;\n    -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n.el-container .roles-detail-wrap .search-wrap[data-v-d09fb9de] {\n    padding: 30px 20px;\n}\n.el-container .roles-detail-wrap .search-wrap .el-form .el-form-item[data-v-d09fb9de] {\n      margin-bottom: 0px;\n}\n.el-container .roles-detail-wrap .search-wrap .el-form .el-input[data-v-d09fb9de] {\n      width: 150px;\n}\n.el-container .roles-detail-wrap .search-wrap .el-form .el-button[data-v-d09fb9de] {\n      margin-left: 20px;\n}\n.el-container .roles-detail-wrap .table-wrap[data-v-d09fb9de] {\n    padding: 0 20px;\n}\n.el-container .roles-detail-wrap .table-wrap .member-table[data-v-d09fb9de] {\n      border: 1px solid #ccc;\n      margin-bottom: 20px;\n}\n.el-container .roles-detail-wrap .el-pagination[data-v-d09fb9de] {\n    text-align: center;\n    margin-bottom: 20px;\n}\n.custom-tree-node[data-v-d09fb9de] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding-right: 8px;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.custom-tree-node .tree-edit-btn[data-v-d09fb9de] {\n    padding: 3px;\n}\n",""])},xQeI:function(e,t,n){"use strict";var a={name:"PublicPopups",props:{titleText:{type:String,default:""},width:{type:String,default:"500px"},mainBorder:{type:Boolean,default:!1}},data:function(){return{popShow:!1}},methods:{emitClosePop:function(){this.$emit("closePopupsBox")},emitConfirm:function(){this.$emit("formConfirm")}}},o=(n("30Qo"),n("KHd+")),r=Object(o.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-shadow"},[n("div",{staticClass:"container",style:{width:e.width}},[n("header",{staticClass:"header",attrs:{height:"50"}},[n("span",[e._v(e._s(e.titleText))]),e._v(" "),n("i",{staticClass:"el-icon-error",on:{click:e.emitClosePop}})]),e._v(" "),n("main",{staticClass:"main",class:{"border-bottom":e.mainBorder}},[e._t("main-content")],2),e._v(" "),n("footer",{staticClass:"footer"},[e._t("footer-content",[n("el-button",{attrs:{size:"small"},on:{click:e.emitClosePop}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.emitConfirm}},[e._v("确定")])])],2)])])},[],!1,null,"001e034e",null);r.options.__file="PublicPopups.vue";t.a=r.exports},y0k3:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".add-roles-from .el-form-item[data-v-b65f2434] {\n  width: 80%;\n  margin: 20px auto;\n}\n.add-roles-from .el-form-item .el-input[data-v-b65f2434], .add-roles-from .el-form-item .el-textarea[data-v-b65f2434] {\n    width: 350px;\n}\n",""])}}]);