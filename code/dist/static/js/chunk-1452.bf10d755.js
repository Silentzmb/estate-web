(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1452"],{"+Wtx":function(e,t,n){var a=n("eZhJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("223fc4d8",a,!0,{})},"/Exk":function(e,t,n){"use strict";n.r(t);var a=n("kOy/"),i=n.n(a),r=n("QbLZ"),o=n.n(r),s=n("L2JU"),c=n("kfgd"),l=n("Z+gP"),d=n("GQeE"),u=n.n(d),p={components:{PublicPopups:n("xQeI").a},props:{isAddMembersShow:{type:Boolean,default:!1}},data:function(){return{projectId:"",participantId:"",memberSeleted:[],transferData:[],isBoxLoading:!1}},watch:{isAddMembersShow:function(e){var t=this;e&&(this.isBoxLoading=!0,Object(l.d)(this.participantId).then(function(e){console.log("resp",e),e.result.forEach(function(e){t.transferData.push({key:e.id,label:e.name,disabled:!1})}),t.isBoxLoading=!1}).catch(function(){t.isBoxLoading=!1}))}},created:function(){this.projectId=this.$route.query.projectId,this.participantId=this.$route.query.participantId},methods:{resetDataProperty:function(e){var t=this;u()(e).forEach(function(n){t[n]=e[n]})},filterSuppliers:function(e,t){return t.label.indexOf(e)>-1},bindMembersHandle:function(){var e=this;0!==this.memberSeleted.length?(this.isBoxLoading=!0,Object(l.a)(this.projectId,this.participantId,this.memberSeleted).then(function(t){e.$message({message:"添加人员成功",type:"success"}),e.isBoxLoading=!1,e.$emit("refreshMembers"),e.closeBox()})):this.closeBox()},closeBox:function(){this.memberSeleted=[],this.transferData=[],this.$emit("update:isAddMembersShow",!1)}}},f=(n("shbG"),n("KHd+")),m=Object(f.a)(p,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("publicPopups",e._g({attrs:{width:"750px","title-text":"添加人员"},on:{formConfirm:e.bindMembersHandle,closePopupsBox:e.closeBox}},e.$listeners),[n("template",{slot:"main-content"},[n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.isBoxLoading,expression:"isBoxLoading"}]},[n("el-main",[n("el-transfer",{attrs:{data:e.transferData,"filter-method":e.filterSuppliers,titles:["参建方人员","已选"],"button-texts":["删除选项","添加选项"],filterable:"","filter-placeholder":"请输入人员名称"},model:{value:e.memberSeleted,callback:function(t){e.memberSeleted=t},expression:"memberSeleted"}})],1)],1)],1)],2)},[],!1,null,"5a172d06",null);m.options.__file="addParticiMembers.vue";var b={components:{AddParticiMembers:m.exports},data:function(){return{projectId:"",membersTableData:[],curParticipantData:{},bindedMemberIds:[],isAddMembersShow:!1,isLoading:!1}},created:function(){var e=this,t=this.$route.query.participantId;this.projectId=this.$route.query.projectId,this.isLoading=!0,this.getProjectParticipants({projectId:this.projectId}).then(function(n){e.curParticipantData=n.find(function(e){return e.id===t}),e.getPariticMembers()})},methods:o()({},Object(s.b)(["getProjectParticipants"]),{getPariticMembers:function(){var e=this;this.isLoading||(this.isLoading=!0);var t=this.$route.query.participantId;Object(l.c)(this.projectId,t).then(function(t){e.membersTableData=t.result,e.membersTableData.forEach(function(t){e.bindedMemberIds.push(t.id)}),e.isLoading=!1})},addMembersHandle:function(){var e={memberSeleted:this.bindedMemberIds};this.$refs.addMembersCom.resetDataProperty(e),this.isAddMembersShow=!0},managerChangeHandle:function(e){var t=this;console.log("data before",e);var n="";n=e.isManager?"确定升级 "+e.name+" 为项目经理？":"确定取消 "+e.name+" 的项目经理职位？",this.$confirm(n,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(n){console.log("data changed",e),t.isLoading=!0,Object(c.g)(e).then(function(e){t.$message({type:"success",message:"修改成功"}),t.isLoading=!1}).catch(function(){e.isManager=Number(Boolean(!e.isManager)),t.isLoading=!1})}).catch(function(){e.isManager=Number(Boolean(!e.isManager))})},unbindMemberHandle:function(e){var t=this,n=i()(e.id),a=this.$route.query.participantId;this.$confirm("确定移除 "+e.name+"？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.isLoading=!0,Object(l.g)(t.projectId,a,n).then(function(e){t.$message({type:"success",message:"移除成功"}),t.getPariticMembers()})})},backHandle:function(){this.$router.go(-1)}})},h=(n("qEmp"),Object(f.a)(b,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"global-container"},[n("el-header",{attrs:{height:"none"}},[n("span",{staticClass:"title-text"},[e._v("参建方详情")]),e._v(" "),n("span",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.backHandle}},[e._v("返回")])],1)]),e._v(" "),n("el-main",[n("div",{staticClass:"base-info-wrap"},[n("p",{staticClass:"title-text"},[e._v("基础信息")]),e._v(" "),n("div",{staticClass:"base-info"},[n("div",{staticClass:"base-info-item"},[n("span",{staticClass:"title-text"},[e._v("公司名称：")]),e._v(" "),n("span",[e._v(e._s(e.curParticipantData.fullName))])]),e._v(" "),n("div",{staticClass:"base-info-item"},[n("span",{staticClass:"title-text"},[e._v("公司简称：")]),e._v(" "),n("span",[e._v(e._s(e.curParticipantData.name))])]),e._v(" "),n("div",{staticClass:"base-info-item"},[n("span",{staticClass:"title-text"},[e._v("负责人：")]),e._v(" "),n("span",[e._v(e._s(e.curParticipantData.official))])]),e._v(" "),n("div",{staticClass:"base-info-item"},[n("span",{staticClass:"title-text"},[e._v("联系电话：")]),e._v(" "),n("span",[e._v(e._s(e.curParticipantData.phone))])])])]),e._v(" "),n("div",{staticClass:"member-table-header"},[n("p",{staticClass:"title-text"},[e._v("参建人员")]),e._v(" "),n("div",{staticClass:"btn-warp"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addMembersHandle}},[e._v("添加人员")])],1)]),e._v(" "),n("el-table",{ref:"membersTable",staticClass:"members-table",attrs:{data:e.membersTableData}},[n("el-table-column",{attrs:{prop:"name",width:"100",label:"姓名",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"职位描述",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"是否是项目经理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#adadad"},on:{change:function(n){e.managerChangeHandle(t.row)}},model:{value:t.row.isManager,callback:function(n){e.$set(t.row,"isManager",n)},expression:"scope.row.isManager"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"no-border",attrs:{size:"mini"},on:{click:function(n){n.stopPropagation(),e.unbindMemberHandle(t.row)}}},[e._v("移除")])]}}])})],1)],1),e._v(" "),n("addParticiMembers",{directives:[{name:"show",rawName:"v-show",value:e.isAddMembersShow,expression:"isAddMembersShow"}],ref:"addMembersCom",attrs:{"is-add-members-show":e.isAddMembersShow},on:{"update:isAddMembersShow":function(t){e.isAddMembersShow=t},refreshMembers:e.getPariticMembers}})],1)},[],!1,null,"369aa7a6",null));h.options.__file="participantDetail.vue";t.default=h.exports},"30Qo":function(e,t,n){"use strict";var a=n("5DVq");n.n(a).a},"5DVq":function(e,t,n){var a=n("mp0y");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("5e669ca7",a,!0,{})},IP1Z:function(e,t,n){"use strict";var a=n("2faE"),i=n("rr1i");e.exports=function(e,t,n){t in e?a.f(e,t,i(0,n)):e[t]=n}},eZhJ:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".el-container .el-main[data-v-5a172d06] .el-transfer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.el-container .el-main[data-v-5a172d06] .el-transfer .el-transfer-panel {\n    width: 250px;\n}\n.el-container .el-main[data-v-5a172d06] .el-transfer .el-transfer-panel .el-transfer-panel__body {\n      height: 350px;\n}\n.el-container .el-main[data-v-5a172d06] .el-transfer .el-transfer-panel .el-transfer-panel__body .el-checkbox-group {\n        height: 300px;\n}\n",""])},hQyo:function(e,t,n){"use strict";var a=n("Y7ZC"),i=n("IP1Z");a(a.S+a.F*n("KUxP")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},"kOy/":function(e,t,n){e.exports={default:n("oiKw"),__esModule:!0}},kfgd:function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"l",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"j",function(){return b}),n.d(t,"k",function(){return h}),n.d(t,"g",function(){return x});var a=n("gDS+"),i=n.n(a),r=n("t3Un");function o(e,t){var n="/organizational/"+e;return Object(r.a)({url:n,method:"put",data:i()(t)})}function s(e){return Object(r.a)({url:"/organizational",method:"post",data:i()(e)})}function c(e){var t="/organizational/"+e;return Object(r.a)({url:t,method:"delete"})}function l(e){return Object(r.a)({url:"/position",method:"post",data:i()(e)})}function d(e,t){var n="/position/"+e;return Object(r.a)({url:n,method:"put",data:i()(t)})}function u(e){return Object(r.a)({url:"/position/tree",method:"get",params:e})}function p(e){var t="/position/"+e;return Object(r.a)({url:t,method:"delete"})}function f(e,t){var n="/person/batch/removePosition/"+e;return Object(r.a)({url:n,method:"post",data:i()(t)})}function m(e,t){var n="/person/batch/bindPosition/"+e;return Object(r.a)({url:n,method:"post",data:i()(t)})}function b(e){return Object(r.a)({url:"/person",method:"get",params:e})}function h(e){var t="/person/in-position/"+e;return Object(r.a)({url:t,method:"get"})}function x(e){var t="/person/"+e.id;return Object(r.a)({url:t,method:"put",data:i()(e)})}},ktD7:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"[data-v-369aa7a6]:export {\n  menuText: #bfcbd9;\n  menuActiveText: #fff;\n  subMenuActiveText: #f4f4f5;\n  menuBg: #304156;\n  menuHover: #263445;\n  menuActive: #2d8cf0;\n  subMenuBg: #1f2d3d;\n  subMenuHover: #001528;\n  sideBarWidth: 210px;\n  redStatus: #ed3f14;\n  greenStatus: #59bba4;\n  orangeStatus: #ff9900;\n  yellowStatus: #FFEB3B;\n  grayStatus: #D9D9D9;\n  blueStatus: #2c8fea;\n  acceptDefault: #fff;\n  processAccepted: #dbebe7;\n}\n.el-container[data-v-369aa7a6] {\n  width: 100%;\n}\n.el-container .el-header[data-v-369aa7a6] {\n    height: 75px;\n    margin: 6px 0;\n    background: #fff;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.el-container .el-header .title-text[data-v-369aa7a6] {\n      font-size: 20px;\n      font-weight: bold;\n}\n.el-container .el-main[data-v-369aa7a6] {\n    margin: 20px;\n    padding: 25px;\n    background: #fff;\n}\n.el-container .el-main .title-text[data-v-369aa7a6] {\n      font-size: 18px;\n      font-weight: bold;\n}\n.el-container .el-main .base-info-wrap[data-v-369aa7a6] {\n      margin-bottom: 30px;\n}\n.el-container .el-main .base-info-wrap .base-info[data-v-369aa7a6] {\n        font-size: 14px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: start;\n            -ms-flex-pack: start;\n                justify-content: flex-start;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -ms-flex-wrap: wrap;\n            flex-wrap: wrap;\n}\n.el-container .el-main .base-info-wrap .base-info .base-info-item[data-v-369aa7a6] {\n          margin: 8px 65px 8px 0px;\n}\n.el-container .el-main .base-info-wrap .base-info .base-info-item .title-text[data-v-369aa7a6] {\n            font-size: 14px;\n            font-weight: bold;\n}\n.el-container .el-main[data-v-369aa7a6] .members-table {\n      margin-top: 20px;\n      border: 1px solid #dddee1;\n}\n.el-container .el-main[data-v-369aa7a6] .members-table .el-table__header th {\n        background: #f8f8f9;\n}\n",""])},mp0y:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".container-shadow[data-v-001e034e] {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.container-shadow .container[data-v-001e034e] {\n    border-radius: 10px;\n    -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n    background: #fff;\n    overflow: hidden;\n}\n.container-shadow .container .header[data-v-001e034e] {\n      padding: 10px 5px 10px 20px;\n      background: #e6e6e6;\n      height: 50px;\n      line-height: 32px;\n      font-size: 18px;\n}\n.container-shadow .container .header i[data-v-001e034e] {\n        cursor: pointer;\n        float: right;\n        color: #f00;\n        font-size: 30px;\n}\n.container-shadow .container .main[data-v-001e034e] {\n      padding: 1px 20px;\n      max-height: calc(100vh - 140px);\n      overflow: auto;\n}\n.container-shadow .container .main.border-bottom[data-v-001e034e] {\n        border-bottom: 1px solid #ccc;\n}\n.container-shadow .container .footer[data-v-001e034e] {\n      min-height: 70px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n}\n.container-shadow .container .footer .el-button[data-v-001e034e] {\n        margin: 0 20px;\n}\n",""])},oiKw:function(e,t,n){n("hQyo"),e.exports=n("WEpk").Array.of},qEmp:function(e,t,n){"use strict";var a=n("rNz6");n.n(a).a},rNz6:function(e,t,n){var a=n("ktD7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("8f723484",a,!0,{})},shbG:function(e,t,n){"use strict";var a=n("+Wtx");n.n(a).a},xQeI:function(e,t,n){"use strict";var a={name:"PublicPopups",props:{titleText:{type:String,default:""},width:{type:String,default:"500px"},mainBorder:{type:Boolean,default:!1}},data:function(){return{popShow:!1}},methods:{emitClosePop:function(){this.$emit("closePopupsBox")},emitConfirm:function(){this.$emit("formConfirm")}}},i=(n("30Qo"),n("KHd+")),r=Object(i.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-shadow"},[n("div",{staticClass:"container",style:{width:e.width}},[n("header",{staticClass:"header",attrs:{height:"50"}},[n("span",[e._v(e._s(e.titleText))]),e._v(" "),n("i",{staticClass:"el-icon-error",on:{click:e.emitClosePop}})]),e._v(" "),n("main",{staticClass:"main",class:{"border-bottom":e.mainBorder}},[e._t("main-content")],2),e._v(" "),n("footer",{staticClass:"footer"},[e._t("footer-content",[n("el-button",{attrs:{size:"small"},on:{click:e.emitClosePop}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.emitConfirm}},[e._v("确定")])])],2)])])},[],!1,null,"001e034e",null);r.options.__file="PublicPopups.vue";t.a=r.exports}}]);